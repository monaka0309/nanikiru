<script>
  document.addEventListener('DOMContentLoaded', () => {
    const tileSelector = document.getElementById('tile-selector');
    const tileSelectorImage = tileSelector.querySelector('img'); // default.pngのimg要素を取得
    const tileSelectorModal = document.getElementById('tile-selector-modal');
    const tileInput = document.getElementById('tile-input'); // フォーム内のhidden_fieldのID

    tileSelector.addEventListener('click', () => {
      tileSelectorModal.classList.toggle('hidden');
    });

    // 牌をクリックしたときの処理
    document.querySelectorAll('.tile-option').forEach((element) => {
      element.addEventListener('click', (event) => {
        event.preventDefault();
        const tileId = event.currentTarget.dataset.tileId;
        const tileImagePath = event.currentTarget.querySelector('img').src;

        // 選択された牌の画像でdefault.pngを置き換える
        tileSelectorImage.src = tileImagePath;

        // 選択された牌のIDをhidden_fieldにセットする
        if (tileInput) {
          tileInput.value = tileId;
        }

        tileSelectorModal.classList.add('hidden');
      });
    });
  });
</script>
